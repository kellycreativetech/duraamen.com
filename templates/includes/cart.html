<style>
.shopify-buy-frame {margin: 0 auto;}
</style>

<script type="text/javascript">
/*<![CDATA[*/

(function () {
  var scriptURL = 'https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js';
  if (window.ShopifyBuy) {
    if (window.ShopifyBuy.UI) {
      ShopifyBuyInit();
    } else {
      loadScript();
    }
  } else {
    loadScript();
  }

  function loadScript() {
    var script = document.createElement('script');
    script.async = true;
    script.src = scriptURL;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
    script.onload = ShopifyBuyInit;
  }

  function ShopifyBuyInit() {
    var client = ShopifyBuy.buildClient({
      domain: 'shop.duraamen.com',
      storefrontAccessToken: 'a101fb6a56588c90b11224037193d216',
      appId: '6',
    });

    var productOptions = {
      "product": {
        "iframe": false,
        "variantId": "all",
        "line-item-property__field": "all",
        "width": "240px",
        "contents": {
          "img": false,
          "imgWithCarousel": false,
          "title": true,
          "variantTitle": false,
          "price": true,
          "description": false,
          "buttonWithQuantity": false,
          "quantity": false,
          "line-item-property__field": true,
          "note": true,
          "apps": true,
          "infiniteOptions": true,
          "textField": true,
          "list-item-property": true,
        },
        "text": {
          "button": "Add to Cart"
        },
        "templates": {
          title: '<h2 class="{% templatetag openvariable %}data.classes.product.title{% templatetag closevariable %}" data-element="product.title">{% templatetag openvariable %}data.title{% templatetag closevariable %}</h2>'
        }
      },
      "cart": {
        "contents": {
          "button": true
        },
        "popup":false,
        "styles": {
          "button": {
            "background-color": "#6c2a1f",
            "font-size": "14px",
            "padding-top": "15px",
            "padding-bottom": "15px",
            ":hover": {
              "background-color": "#61261c"
            },
            "border-radius": "2px",
            ":focus": {
              "background-color": "#61261c"
            }
          },
          "footer": {
            "background-color": "#ffffff"
          }
        }
      },
      "toggle": {
        "styles": {
          "toggle": {
            "background-color": "#6c2a1f",
            ":hover": {
              "background-color": "#61261c"
            },
            ":focus": {
              "background-color": "#61261c"
            }
          },
          "count": {
            "color": "#ffffff",
            ":hover": {
              "color": "#ffffff"
            },
            "font-size": "14px"
          },
          "iconPath": {
            "fill": "#ffffff"
          }
        }
      }
    }


    ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
      {% if page.content.shopify_product_id %}
      ui.createComponent('product', {
        id: [{{ page.content.shopify_product_id|striptags }}],
        node: document.getElementById('product-component-ec1c4450888'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: productOptions
      });



      {% else %}
      ui.createCart({
          moneyFormat: '%24%7B%7Bamount%7D%7D',
          options: productOptions
      })
      {% endif %}
    });


    // optional second product on page
    {% if page.content.shopify_sample_id %}
        ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
          ui.createComponent('product', {
            id: [{{ page.content.shopify_sample_id }}],
            node: document.getElementById('product-component-f0d847679a0'),
            moneyFormat: '%24%7B%7Bamount%7D%7D',
            options: productOptions
          });
        });
   {% endif %}


   // optional products for case study pages
   {% if page.content.shopify_product_2 %}
       ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
         ui.createComponent('product', {
           id: [{{ page.content.shopify_product_2 }}],
           node: document.getElementById('product-component-2'),
           moneyFormat: '%24%7B%7Bamount%7D%7D',
           options: productOptions
         });
       });
  {% endif %}

  {% if page.content.shopify_product_3 %}
      ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
        ui.createComponent('product', {
          id: [{{ page.content.shopify_product_3 }}],
          node: document.getElementById('product-component-3'),
          moneyFormat: '%24%7B%7Bamount%7D%7D',
          options: productOptions
        });
      });
 {% endif %}

 {% if page.content.shopify_product_4 %}
     ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
       ui.createComponent('product', {
         id: [{{ page.content.shopify_product_4 }}],
         node: document.getElementById('product-component-4'),
         moneyFormat: '%24%7B%7Bamount%7D%7D',
         options: productOptions
       });
     });
{% endif %}

{% if page.content.shopify_product_5 %}
    ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
      ui.createComponent('product', {
        id: [{{ page.content.shopify_product_5 }}],
        node: document.getElementById('product-component-5'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: productOptions
      });
    });
{% endif %}

{% if page.content.shopify_product_6 %}
    ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
      ui.createComponent('product', {
        id: [{{ page.content.shopify_product_6 }}],
        node: document.getElementById('product-component-6'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: productOptions
      });
    });
{% endif %}

{% if page.content.shopify_product_7 %}
    ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
      ui.createComponent('product', {
        id: [{{ page.content.shopify_product_7 }}],
        node: document.getElementById('product-component-7'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: productOptions
      });
    });
{% endif %}

{% if page.content.shopify_product_8 %}
    ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
      ui.createComponent('product', {
        id: [{{ page.content.shopify_product_8 }}],
        node: document.getElementById('product-component-8'),
        moneyFormat: '%24%7B%7Bamount%7D%7D',
        options: productOptions
      });
    });
{% endif %}

  // a smarter way to do this...

  var productIndexItems = document.querySelectorAll('[data-shopify-product-id]');

  if (productIndexItems.length > 0) {
    productIndexItems.forEach(function(e) {
      var productId = e.dataset.shopifyProductId;

      ShopifyBuy.UI.onReady(client, productOptions).then(function (ui) {
        ui.createComponent('product', {
          id: [productId],
          node: e,
          moneyFormat: '%24%7B%7Bamount%7D%7D',
          options: productOptions
        });
      });
    });
  }


  }
})();
/*]]>*/
</script>
